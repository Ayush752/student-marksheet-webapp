<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Interstellar Architect</title>
<style>
body{margin:0;overflow:hidden;background:black;}
#hud{
position:fixed;
top:20px;
left:20px;
color:#00f5ff;
font-family:monospace;
z-index:10;
}
</style>
</head>
<body>

<div id="hud">
ðŸŒ  INTERSTELLAR ARCHITECT <br>
Click to enter FPS Mode
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* LIGHT */
let light = new THREE.PointLight(0xffffff,2);
light.position.set(10,20,10);
scene.add(light);

/* PROCEDURAL GALAXY */
let starGeo = new THREE.BufferGeometry();
let starCount = 10000;
let posArray = new Float32Array(starCount*3);
let colorArray = new Float32Array(starCount*3);

for(let i=0;i<starCount;i++){
  let i3 = i*3;
  posArray[i3] = (Math.random()-0.5)*1500;
  posArray[i3+1] = (Math.random()-0.5)*1500;
  posArray[i3+2] = (Math.random()-0.5)*1500;

  colorArray[i3] = Math.random();
  colorArray[i3+1] = Math.random();
  colorArray[i3+2] = 1;
}

starGeo.setAttribute('position', new THREE.BufferAttribute(posArray,3));
starGeo.setAttribute('color', new THREE.BufferAttribute(colorArray,3));

let starMat = new THREE.PointsMaterial({size:1,vertexColors:true});
let stars = new THREE.Points(starGeo, starMat);
scene.add(stars);

/* PLANETS */
function createPlanet(color,x,z){
  let geo = new THREE.SphereGeometry(5,32,32);
  let mat = new THREE.MeshStandardMaterial({
    color:color,
    emissive:color,
    emissiveIntensity:0.3
  });
  let mesh = new THREE.Mesh(geo,mat);
  mesh.position.set(x,0,z);
  scene.add(mesh);
  return mesh;
}

let planet1 = createPlanet(0x2222ff,-30,-100);
let planet2 = createPlanet(0xff0022,40,-200);

/* PORTAL */
let portalGeo = new THREE.TorusGeometry(8,1,16,100);
let portalMat = new THREE.MeshBasicMaterial({color:0x00f5ff});
let portal = new THREE.Mesh(portalGeo, portalMat);
portal.position.set(0,0,-50);
scene.add(portal);

/* FPS CONTROLS */
let moveForward=false,moveBackward=false,moveLeft=false,moveRight=false;
let velocity = new THREE.Vector3();

document.body.addEventListener("click",()=>{
  document.body.requestPointerLock();
});

document.addEventListener("mousemove",(e)=>{
  if(document.pointerLockElement===document.body){
    camera.rotation.y -= e.movementX*0.002;
    camera.rotation.x -= e.movementY*0.002;
  }
});

document.addEventListener("keydown",(e)=>{
  if(e.key==="w") moveForward=true;
  if(e.key==="s") moveBackward=true;
  if(e.key==="a") moveLeft=true;
  if(e.key==="d") moveRight=true;
});
document.addEventListener("keyup",(e)=>{
  if(e.key==="w") moveForward=false;
  if(e.key==="s") moveBackward=false;
  if(e.key==="a") moveLeft=false;
  if(e.key==="d") moveRight=false;
});

camera.position.z = 20;

/* ANIMATION LOOP */
function animate(){
  requestAnimationFrame(animate);

  velocity.set(0,0,0);
  if(moveForward) velocity.z -= 0.5;
  if(moveBackward) velocity.z += 0.5;
  if(moveLeft) velocity.x -= 0.5;
  if(moveRight) velocity.x += 0.5;

  camera.translateX(velocity.x);
  camera.translateZ(velocity.z);

  /* Rotate Planets */
  planet1.rotation.y += 0.01;
  planet2.rotation.y += 0.008;

  /* Rotate Portal */
  portal.rotation.x += 0.02;
  portal.rotation.y += 0.02;

  /* TELEPORT */
  if(camera.position.distanceTo(portal.position)<10){
    camera.position.set(0,0,200);
  }

  renderer.render(scene,camera);
}
animate();

/* RESPONSIVE */
window.addEventListener("resize",()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
